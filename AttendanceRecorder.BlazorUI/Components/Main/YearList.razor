<h3>Years</h3>

@if (_years == null)
{
    <p>Loading years...</p>
}
else
{
    <ul class="list-unstyled year-list">
        @foreach (var year in _years)
        {
            <li>
                <button type="button"
                        class="btn year-btn @(year == _selectedYear ? "btn-primary" : "btn-secondary")"
                        @onclick="() => SelectYear(year)"
                        aria-pressed="@(year == _selectedYear)"
                        aria-label="Select year @year">
                    @year
                </button>
            </li>
        }
    </ul>
}

@code {
    private IEnumerable<int>? _years;
    private int? _selectedYear;

    protected override async Task OnInitializedAsync()
    {
        var apiClient = new ApiClient("http://localhost:5225", new HttpClient());
        _years = (await apiClient.YearsAsync()).OrderByDescending(y => y);
        _selectedYear = _years?.FirstOrDefault(); // auto-select first year if available
    }

    private void SelectYear(int year)
    {
        _selectedYear = year;
    }
}